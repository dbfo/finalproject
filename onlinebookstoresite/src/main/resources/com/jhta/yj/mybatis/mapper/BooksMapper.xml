<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.jhta.yj.mybatis.mapper.BooksMapper">
	<!-- 책등록 -->
	<insert id="booksInsert" parameterType="books">
		insert into books values
		(SEQ_BOOKS_BNUM.nextval, #{btitle}, #{bwriter}, #{bpublishdate},
		#{bpublisher}, #{bprice}, #{bpoint}, #{bshipinfo}, #{bcount},
		#{bcontent}, 0, #{scatenum}, sysdate)
	</insert>

	<insert id="imgInsert" parameterType="img">
		insert into img	values(#{imgorgfilename}, SEQ_IMG_IMGNUM.nextval, #{imgsavefilename}, #{thumbnail}, 1, SEQ_BOOKS_BNUM.currval)
	</insert>

	<!-- 카테고리 -->
	<select id="bctg" resultType="bctg">
		select * from bigcategory
		order by bcatenum
	</select>

	<select id="smctg" resultType="smctg" parameterType="int">
		select * from smallcategory
		where bcatenum=#{bcatenum}
		order by scatenum
	</select>

	<select id="list" resultType="books">
		select * from books
	</select>
	
	<!-- 미리보기 -->
	<select id="preview" resultType="books" parameterType="int">
		select * from books where bnum = #{bnum}
	</select>
	
	<select id="previewImg" resultType="img" parameterType="int">
		select * from img where bnum = #{bnum} order by thumbnail desc
	</select>
</mapper>